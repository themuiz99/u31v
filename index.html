<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Themuiz | Save User</title> <!-- Changed website title -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Add Font Awesome for button icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;600;700&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Set HTML and Body to full height and hide scrollbar */
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden; /* Hide main scrollbar to fit a single screen */
            box-sizing: border-box;
        }
        body {
            font-family: 'Mali', cursive; /* Use Mali font for the entire page */
            background-color: #1a202c; /* Dark background for night mode */
            color: #e2e8f0; /* Light text color */
            display: flex;
            flex-direction: column; /* Arrange elements vertically */
            justify-content: space-between; /* Distribute space so Header and Footer are at top/bottom */
            align-items: center; /* Center horizontally */
            height: 100vh; /* Set Body height to viewport height */
            padding: 0.2rem; /* Reduce padding around to allow more space */
            padding-bottom: 0.2rem; /* Further reduce bottom padding */
        }
        .header-title {
            font-size: 1.6rem; /* Further reduce title font size */
            font-weight: 700; /* Bold font */
            color: #ffffff; /* Change to white */
            margin-bottom: 0.5rem; /* Reduce bottom margin */
            text-align: center; /* Center align text */
            line-height: 1.2; /* Adjust line-height for tighter text */
            white-space: nowrap; /* Prevent text wrapping */
            max-width: 100%; /* Limit max width to prevent overflow */
            overflow: hidden; /* Hide overflow */
            text-overflow: ellipsis; /* Show ... for overflowed text */
            /* Add text-shadow for outline effect around each letter */
            text-shadow:
                -1px -1px 0 #000,
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000,
                -2px 0 0 #000, /* Further adjustments for a clearer outline */
                2px 0 0 #000,
                0 -2px 0 #000,
                0 2px 0 #000;
        }
        .container {
            width: 100%;
            max-width: 900px; /* Max width for larger screens */
            flex-grow: 1; /* Allow container to grow and fill remaining space */
            display: grid;
            gap: 0.6rem; /* Reduce gap between cards */
            /* Responsive grid layout */
            grid-template-columns: 1fr; /* Single column for small screens */
            align-items: center; /* Center cards vertically within grid */
            justify-content: center; /* Center cards horizontally within grid */
            overflow-y: hidden; /* Hide container scrollbar to fit single screen */
            padding: 0.2rem; /* Reduce inner padding of container */
            padding-bottom: 0.2rem; /* Further reduce bottom padding */
            height: 100%; /* Make container use all remaining height */
        }
        @media (min-width: 768px) { /* For medium screens and up */
            .container {
                grid-template-columns: repeat(3, 1fr); /* Three columns */
            }
        }
        .card {
            background-color: #2d3748; /* Slightly darker color for cards */
            border-radius: 0.75rem; /* Rounded corners */
            padding: 0.7rem; /* Reduce inner padding of card */
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between; /* Distribute space evenly */
            text-align: center;
            flex-grow: 1; /* Allow card to grow within grid cell */
            min-height: 0; /* Allow card to shrink if necessary */
        }
        .result-display {
            background-color: #ffffff; /* Change to white */
            color: #1a202c; /* Change to black for contrast */
            padding: 0.5rem 0.7rem; /* Slightly increase display area padding */
            border-radius: 0.5rem;
            margin-bottom: 0.6rem;
            width: 100%;
            font-size: 1.1rem; /* Slightly increase font size */
            font-weight: 800; /* Bolder font */
            word-break: break-all;
            text-align: center;
            cursor: pointer; /* Add pointer cursor to indicate clickability */
            transition: background-color 0.2s ease-in-out; /* Add transition */
        }
        /* Style for placeholder text in .result-display */
        .result-display.placeholder-text {
            font-size: 0.9rem; /* Smaller font size */
            color: #a0aec0; /* Lighter color */
            font-weight: 600; /* Not as bold as normal results */
        }

        .input-field {
            background-color: #ffffff; /* Change to white */
            color: #1a202c; /* Change to black for contrast */
            padding: 0.5rem 0.7rem;
            border-radius: 0.5rem;
            margin-bottom: 0.6rem;
            width: 100%;
            font-size: 1.1rem; /* Slightly increase font size */
            font-weight: 600;
            border: none;
            outline: none;
            text-align: center;
            cursor: text; /* Change to text cursor for input field */
            transition: background-color 0.2s ease-in-out; /* Add transition */
        }
        .input-field:hover {
            background-color: #f0f0f0; /* Lighter color on hover */
        }
        .bank-select-field { /* New class for select bank */
            background-color: #ffffff; /* Change to white */
            color: #1a202c; /* Change to black for contrast */
            padding: 0.5rem 0.7rem;
            border-radius: 0.5rem;
            margin-bottom: 0.6rem;
            width: 100%;
            font-size: 1.1rem; /* Slightly increase font size */
            font-weight: 600;
            border: none;
            outline: none;
            text-align: center;
            cursor: pointer; /* Keep pointer cursor for selection */
            transition: background-color 0.2s ease-in-out; /* Add transition */
        }
        .bank-select-field:hover {
            background-color: #f0f0f0; /* Lighter color on hover */
        }

        .button-group {
            display: flex;
            gap: 0.4rem;
            width: 100%;
            justify-content: center;
        }
        .btn {
            padding: 0.6rem 0.8rem; /* Adjusted padding for better button size */
            border-radius: 0.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            flex: 1; /* Make buttons fill available space */
            font-size: 0.85rem; /* Adjusted font size for single line */
            display: flex; /* Display icon and text on the same line */
            align-items: center;
            justify-content: center;
            gap: 0.3rem; /* Space between icon and text */
            white-space: nowrap; /* Ensure text stays on one line */
        }
        .btn i {
            font-size: 1.2em; /* Ensure icon scales well with button font size */
        }
        .btn-primary {
            background-color: #667eea;
            color: white;
        }
        .btn-primary:hover {
            background-color: #5a67d8;
        }
        .btn-save {
            background-color: #48bb78;
            color: white;
            padding: 0.3rem 0.6rem;
            font-size: 0.75rem;
            margin-top: 0.6rem;
            width: auto;
        }
        .btn-save:hover {
            background-color: #38a169;
        }
        .footer-credit {
            font-size: 0.7rem;
            color: #a0aec0;
            margin-top: 0.6rem;
        }
        .message-box {
            position: fixed;
            bottom: 0.2rem;
            left: 50%;
            transform: translateX(-50%);
            background-color: #48bb78;
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            z-index: 1000;
            white-space: nowrap;
            font-size: 0.75rem;
        }
        .message-box.show {
            opacity: 1;
        }
        .message-box.error {
            background-color: #ef4444;
        }
         /* Styles for Prompt Box */
        .prompt-box-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
        }
        .prompt-box-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        .prompt-box-content {
            background-color: #2d3748;
            padding: 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            width: 90%;
            max-width: 400px;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            text-align: center;
        }
        .prompt-box-content h3 {
            font-size: 1.2rem;
            font-weight: 700;
            color: white;
        }
        .prompt-box-content input {
            background-color: #ffffff;
            color: #1a202c;
            padding: 0.6rem 0.8rem;
            border-radius: 0.5rem;
            border: none;
            outline: none;
            font-size: 1rem;
            text-align: center;
        }
        .prompt-box-buttons {
            display: flex;
            justify-content: space-around;
            gap: 0.5rem;
        }
        .prompt-box-buttons button {
            padding: 0.6rem 1.2rem;
            border-radius: 0.5rem;
            font-weight: 700;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            flex: 1;
            border: none;
        }
        .prompt-box-ok {
            background-color: #48bb78;
            color: white;
        }
        .prompt-box-ok:hover {
            background-color: #38a169;
        }
        .prompt-box-cancel {
            background-color: #ef4444;
            color: white;
        }
        .prompt-box-cancel:hover {
            background-color: #dc2626;
        }
    </style>
</head>
<body>
    <div class="header-title">Themuiz | Save User</div> <!-- Changed website title -->

    <div class="container">
        <!-- Combined User and Phone Card -->
        <div class="card">
            <h2 class="text-lg font-bold mb-3">ยูสเซอร์ และ เบอร์โทร</h2> <!-- Updated combined title -->
            <div id="themuizUserDisplay" class="result-display placeholder-text mb-2">ผลลัพธ์ยูสเซอร์จะโชว์ที่นี่</div> <!-- Added mb-2 for spacing -->
            <div id="phoneDisplay" class="result-display placeholder-text">ผลลัพธ์เบอร์โทรจะโชว์ที่นี่</div>
        </div>

        <!-- Random Name-Surname -->
        <div class="card">
            <h2 class="text-lg font-bold mb-3">ชื่อ-นามสกุล</h2>
            <div id="nameSurnameDisplay" class="result-display">กด "สุ่ม" เพื่อสร้าง</div>
            <div class="button-group">
                <button id="randomNameSurnameBtn" class="btn btn-primary">สุ่ม</button>
            </div>
        </div>

        <!-- Select Bank -->
        <div class="card">
            <h2 class="text-lg font-bold mb-3">เลือกธนาคาร</h2>
            <select id="bankSelect" class="bank-select-field">
                <!-- Options will be generated by JavaScript -->
            </select>
        </div>

        <!-- Enter Bank Account Number -->
        <div class="card">
            <h2 class="text-lg font-bold mb-3">เลขบัญชีธนาคาร</h2>
            <input type="text" id="bankAccountInput" class="input-field" placeholder="กรอกเลขบัญชีที่นี่">
            <!-- Add buttons for bank account management -->
            <div class="button-group mt-2"> <!-- Add a small top margin -->
                <button id="pasteBankAccBtn" class="btn bg-blue-500 hover:bg-blue-600 text-white">
                    <i class="fas fa-paste"></i> วาง
                </button>
                <button id="copyBankAccBtn" class="btn bg-green-500 hover:bg-green-600 text-white">
                    <i class="fas fa-copy"></i> คัดลอก
                </button>
                <button id="clearBankAccBtn" class="btn bg-red-500 hover:bg-red-600 text-white">
                    <i class="fas fa-trash-alt"></i> ล้าง
                </button>
            </div>
        </div>
    </div>

    <div class="w-full flex justify-center">
        <button id="saveFileBtn" class="btn btn-save">บันทึกรายการ</button>
    </div>

    <div class="footer-credit">Themuiz × มะลิ</div>

    <div id="messageBox" class="message-box"></div>

    <!-- Custom Prompt Box for Website Name -->
    <div id="websiteNamePromptOverlay" class="prompt-box-overlay">
        <div class="prompt-box-content">
            <h3>กรุณาป้อนชื่อเว็บ:</h3>
            <input type="text" id="websiteNameInput" placeholder="">
            <div class="prompt-box-buttons">
                <button id="promptOkBtn" class="prompt-box-ok">ตกลง</button>
                <button id="promptCancelBtn" class="prompt-box-cancel">ยกเลิก</button>
            </div>
        </div>
    </div>

    <script>
        // Function to display notification messages
        function showMessage(message, type = 'success') {
            const messageBox = document.getElementById('messageBox');
            messageBox.textContent = message;
            messageBox.classList.remove('success', 'error');
            messageBox.classList.add(type);
            messageBox.classList.add('show');
            setTimeout(() => {
                messageBox.classList.remove('show', type);
            }, 2000);
        }

        // Function to copy text to clipboard
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            try {
                // Use document.execCommand('copy') as navigator.clipboard.writeText might not work in iFrame
                document.execCommand('copy');
                showMessage('คัดลอกแล้ว!');
            } catch (err) {
                console.error('Failed to copy:', err);
                showMessage('คัดลอกไม่สำเร็จ', 'error');
            }
            document.body.removeChild(textarea);
        }

        // --- User and Phone Number section (linked to bank account) ---
        const themuizUserDisplay = document.getElementById('themuizUserDisplay');
        const phoneDisplay = document.getElementById('phoneDisplay');
        const bankAccountInput = document.getElementById('bankAccountInput');
        const bankSelect = document.getElementById('bankSelect');

        // Function to update user and phone number based on bank account
        function updateLinkedFields() {
            const accountNumber = bankAccountInput.value.replace(/\D/g, ''); // Remove non-numeric characters
            const selectedBank = bankSelect.value;

            // Update user
            if (accountNumber.length > 0 && selectedBank !== '') { // Check if account number is entered and bank is selected
                let suffixDigits;
                if (selectedBank === 'ธนาคารอาคารสงเคราะห์') {
                    // Use last 3 digits for Government Housing Bank
                    suffixDigits = accountNumber.slice(-3);
                    if (accountNumber.length >= 3) {
                        themuizUserDisplay.textContent = `themuiz${suffixDigits}`;
                        themuizUserDisplay.classList.remove('placeholder-text');
                    } else {
                        themuizUserDisplay.textContent = 'ผลลัพธ์ยูสเซอร์จะโชว์ที่นี่';
                        themuizUserDisplay.classList.add('placeholder-text');
                    }
                } else {
                    // Use last 4 digits for other banks
                    suffixDigits = accountNumber.slice(-4);
                    if (accountNumber.length >= 4) {
                        themuizUserDisplay.textContent = `themuiz${suffixDigits}`;
                        themuizUserDisplay.classList.remove('placeholder-text');
                    } else {
                        themuizUserDisplay.textContent = 'ผลลัพธ์ยูสเซอร์จะโชว์ที่นี่';
                        themuizUserDisplay.classList.add('placeholder-text');
                    }
                }
            } else {
                themuizUserDisplay.textContent = 'ผลลัพธ์ยูสเซอร์จะโชว์ที่นี่';
                themuizUserDisplay.classList.add('placeholder-text');
            }

            // Update phone number (still uses last 8 digits)
            if (accountNumber.length >= 8 && selectedBank !== '') { // Check if account number is entered and bank is selected
                const lastEightDigits = accountNumber.slice(-8);
                phoneDisplay.textContent = `09${lastEightDigits}`;
                phoneDisplay.classList.remove('placeholder-text');
            } else {
                phoneDisplay.textContent = 'ผลลัพธ์เบอร์โทรจะโชว์ที่นี่';
                phoneDisplay.classList.add('placeholder-text');
            }
        }

        // Event listener for bank account input
        bankAccountInput.addEventListener('input', updateLinkedFields);
        // Event listener for bank selection change
        bankSelect.addEventListener('change', updateLinkedFields);


        // Event listeners for click to copy
        // User
        themuizUserDisplay.addEventListener('click', () => {
            if (themuizUserDisplay.textContent !== 'ผลลัพธ์ยูสเซอร์จะโชว์ที่นี่' && themuizUserDisplay.textContent !== '') {
                copyToClipboard(themuizUserDisplay.textContent);
            } else {
                showMessage('ไม่มีข้อมูลยูสเซอร์ให้คัดลอก', 'error');
            }
        });

        // Phone number
        phoneDisplay.addEventListener('click', () => {
            if (phoneDisplay.textContent !== 'ผลลัพธ์เบอร์โทรจะโชว์ที่นี่' && phoneDisplay.textContent !== '') {
                copyToClipboard(phoneDisplay.textContent);
            } else {
                showMessage('ไม่มีข้อมูลเบอร์โทรให้คัดลอก', 'error');
            }
        });

        // Bank account (for input field)
        bankAccountInput.addEventListener('click', (event) => {
            // Prevent copying when clicking to focus or type
            if (event.target === document.activeElement) {
                // If this element is already focused (typing), do not copy
                return;
            }
            if (bankAccountInput.value.trim() !== '') {
                copyToClipboard(bankAccountInput.value.trim());
            } else {
                showMessage('ไม่มีเลขบัญชีให้คัดลอก', 'error');
            }
        });


        // --- Name-Surname section ---
        const thaiSanskritNames = [
            "อรุณ", "เมษา", "นารา", "ปัญญา", "วิชา", "สุริยา", "จันทรา", "อัปสร", "มณี", "กมล",
            "เพชร", "รุ่ง", "แก้ว", "ทิพย์", "บุษบา", "มาลี", "วารี", "ศิริ", "สุข", "สมบัติ",
            "รัตนา", "อัญชลี", "กานต์", "พิชญา", "ธนากร", "ปรีชา", "วาสนา", "อารยา", "จิราพร", "ชนกชนม์",
            "กัลยา", "กัญญา", "กิตติ", "เกศรา", "ขวัญฤดี", "จารุ", "จิรวัฒน์", "ชนินทร์", "ชลธิชา", "ชุติมา",
            "ณัฐพล", "ดารุณี", "ทิพวรรณ", "ธนวัฒน์", "ธิดารัตน์", "นพรัตน์", "นันทนา", "นฤมล", "บุญญานุช", "บุษกร",
            "ปนัดดา", "ปรียา", "พงษ์ศักดิ์", "พัชรี", "พิมพา", "ไพโรจน์", "ภัทรวดี", "ภาณุพงศ์", "มยุรี", "มนตรี",
            "ยุพิน", "รุ่งทิวา", "ลลิตา", "วรัญญา", "วราภรณ์", "วิภาดา", "ศศิธร", "สมชาย", "สุนิสา", "สุพรรณี",
            "อภิชาติ", "อริยา", "อัจฉรา", "อำไพ", "เอกชัย", "กวิน", "กัญญาณัฐ", "จิรภัทร", "ชลิตา", "ญาณิศา",
            "ฐิติมา", "ธนพร", "นภัสสร", "ปภาดา", "พัชรินทร์", "ภัทรพล", "รพีพร", "วรัญญา", "ศุภชัย", "สุธาสินี",
            "อนันต์", "อภิญญา", "อัญชลี", "กฤติน", "กานต์ชนก", "จิรดา", "ชนัญชิดา", "ญาดา", "ฐิติพงศ์", "ธนวินท์",
            "นันทิยา", "ปณิธาน", "พัชราภรณ์", "ภัทรพงศ์", "รุ่งนภา", "วรินทร", "ศุภลักษณ์", "สุภาภรณ์", "อเนก", "อารีรัตน์",
            "กฤตภาส", "กานต์ธีรา", "จิรพัฒน์", "ชนิตา", "ญาณิน", "ฐิติรัตน์", "ธนัช", "นันทพร", "ปภาวิน", "พัชรพล",
            "ภัทรพล", "รุ่งโรจน์", "วรินทร", "ศุภกร", "สุภาวดี", "อเนชา", "อารยา", "กฤตยา", "กานต์พิชชา", "จิรภา",
            "ชนิศา", "ญาณิศา", "ฐิติมา", "ธนัชญา", "นันทวัน", "ปภาวดี", "พัชราภา", "ภัทรวดี", "รุ่งเรือง", "วรินทร์",
            "ศุภรัตน์", "สุภัทรา", "อนงค์นาถ", "อารีย์", "กฤติยา", "กานต์พิชญ์", "จิรวัฒน์", "ชนิษฐา", "ญาณิศา", "ฐิติรัตน์",
            "ธนัชพร", "นันทิพร", "ปภาวรินทร์", "พัชราพร", "ภัทรินทร์", "รุ่งอรุณ", "วรินทร์ทิพย์", "ศุภวรรณ", "สุภาภรณ์", "อนงค์นาถ",
            "อารีรัตน์", "กฤติยา", "กานต์พิชญ์", "จิรวัฒน์", "ชนิษฐา", "ญาณิศา", "ฐิติรัตน์", "ธนัชพร", "นันทิพร", "ปภาวรินทร์",
            "พัชราพร", "ภัทรินทร์", "รุ่งอรุณ", "วรินทร์ทิพย์", "ศุภวรรณ", "สุภาภรณ์", "อนงค์นาถ",
            "กฤษณา", "กัญญาภัค", "จิรภัทร", "ชนิสรา", "ญาณิกา", "ฐิตินันท์", "ธนัชภรณ์", "นันทิมา", "ปภาวดี", "พัชราภา",
            "ภัทรวดี", "รุ่งเรือง", "วรินทร์", "ศุภรัตน์", "สุภัทรา", "อนงค์นาถ", "อารีย์", "กฤติยา", "กานต์พิชญ์", "จิรวัฒน์",
            "ชนิษฐา", "ญาณิศา", "ฐิติรัตน์", "ธนัชพร", "นันทิพร", "ปภาวรินทร์", "พัชราพร", "ภัทรินทร์", "รุ่งอรุณ", "วรินทร์ทิพย์",
            "ศุภวรรณ", "สุภาภรณ์", "อนงค์นาถ", "อารีรัตน์", "กฤติยา", "กานต์พิชญ์", "จิรวัฒน์", "ชนิษฐา", "ญาณิศา", "ฐิติรัตน์",
            "ธนัชพร", "นันทิพร", "ปภาวรินทร์", "พัชราพร", "ภัทรินทร์", "รุ่งอรุณ", "วรินทร์ทิพย์", "ศุภวรรณ", "สุภาภรณ์", "อนงค์นาถ",
            "กฤษณา", "กัญญาภัค", "จิรภัทร", "ชนิสรา", "ญาณิกา", "ฐิตินันท์", "ธนัชภรณ์", "นันทิมา", "ปภาวดี", "พัชราภา",
            "ภัทรวดี", "รุ่งเรือง", "วรินทร์", "ศุภรัตน์", "สุภัทรา", "อนงค์นาถ", "อารีย์", "กฤติยา", "กานต์พิชญ์", "จิรวัฒน์",
            "ชนิษฐา", "ญาณิศา", "ฐิติรัตน์", "ธนัชพร", "นันทิพร", "ปภาวรินทร์", "พัชราพร", "ภัทรินทร์", "รุ่งอรุณ", "วรินทร์ทิพย์",
            "ศุภวรรณ", "สุภาภรณ์", "อนงค์นาถ"
        ];

        const thaiSurnameWords1Syllable = [
            "สุข", "ดี", "ศรี", "บุญ", "ทอง", "แก้ว", "เพชร", "แสง", "ฟ้า", "ดิน", "น้ำ", "ใจ",
            "รัก", "รุ่ง", "งาม", "มั่น", "คง", "ยิ่ง", "ใหญ่", "พงษ์", "ธน", "ชัย", "พร", "เดช",
            "โชค", "ลาภ", "ยศ", "ศักดิ์", "ฤทธิ์", "สิทธิ์", "ธรรม", "คุณ", "มง"
        ];
        const thaiSurnameWords2Syllables = [
            "เจริญ", "มงคล", "สวัสดิ์", "ศิลป์", "มั่งคั่ง", "ร่ำรวย", "ผาสุก", "วิไล", "ไพศาล", "อุดม",
            "วัฒนา", "พิทักษ์", "ประเสริฐ", "สมบูรณ์", "บารมี", "เมตตา", "ปรีดา", "พูนสุข", "โชคดี",
            "สุวรรณ", "พิพัฒน์", "รุ่งเรือง", "ธนากร", "ศิริชัย", "สุขสันต์", "บุญฤทธิ์", "ทิพย์รัตน์",
            "ปัญญา", "วิชา", "สมบัติ", "รัตนา", "อัญชลี", "กานต์", "พิชญา", "วาสนา", "อารยา"
        ];
        const thaiSurnameWords3Syllables = [
            "เกียรติยศ", "เจริญสุข", "ทิพย์รัตน์", "มหาศาล", "อุดมสุข", "ประภัสสร", "สิริโชค", "ธนทรัพย์",
            "เจริญพร", "สิริวัฒน์", "มงคลชัย", "โชคอนันต์"
        ];
        const thaiSurnameWords4Syllables = [
            "รัตนากร", "บุญญานุภาพ"
        ];

        const allThaiSurnameWords = [
            ...thaiSurnameWords1Syllable,
            ...thaiSurnameWords2Syllables,
            ...thaiSurnameWords3Syllables,
            ...thaiSurnameWords4Syllables
        ];

        function getRandomElement(arr) {
            return arr[Math.floor(Math.random() * arr.length)];
        }

        function getSyllableCount(word) {
            if (thaiSurnameWords1Syllable.includes(word)) return 1;
            if (thaiSurnameWords2Syllables.includes(word)) return 2;
            if (thaiSurnameWords3Syllables.includes(word)) return 3;
            if (thaiSurnameWords4Syllables.includes(word)) return 4;
            return 1; // Default value
        }

        const generatedNameSurnames = new Set(); // Store generated names to avoid duplicates

        function generateThaiNameSurname() {
            let newFullName;
            let attempts = 0;
            const maxAttempts = 1000;

            do {
                const randomName = getRandomElement(thaiSanskritNames);
                let newSurname = '';
                let currentSyllables = 0;
                const targetTotalSyllables = Math.floor(Math.random() * 3) + 2; // 2, 3, or 4 syllables

                let parts = [];
                let innerLoopAttempts = 0;

                while (currentSyllables < targetTotalSyllables && innerLoopAttempts < 50) {
                    const remainingSyllables = targetTotalSyllables - currentSyllables;
                    const possibleWords = allThaiSurnameWords.filter(word => {
                        const wordSyllables = getSyllableCount(word);
                        return wordSyllables <= remainingSyllables;
                    });

                    if (possibleWords.length === 0) {
                        break;
                    }

                    const selectedWord = getRandomElement(possibleWords);
                    parts.push(selectedWord);
                    currentSyllables += getSyllableCount(selectedWord);
                    innerLoopAttempts++;
                }

                newSurname = parts.join('');
                newFullName = `${randomName} ${newSurname}`;
                attempts++;
                if (attempts > maxAttempts) {
                    console.warn("Could not generate a unique name-surname after many attempts");
                    break;
                }
            } while (generatedNameSurnames.has(newFullName));

            generatedNameSurnames.add(newFullName);
            return newFullName;
        }

        document.getElementById('randomNameSurnameBtn').addEventListener('click', () => {
            document.getElementById('nameSurnameDisplay').textContent = generateThaiNameSurname();
        });
        // Event listener for click to copy name-surname
        document.getElementById('nameSurnameDisplay').addEventListener('click', () => {
            if (document.getElementById('nameSurnameDisplay').textContent !== 'กด "สุ่ม" เพื่อสร้าง') {
                copyToClipboard(document.getElementById('nameSurnameDisplay').textContent);
            } else {
                showMessage('ไม่มีชื่อ-นามสกุลให้คัดลอก', 'error');
            }
        });


        // --- Bank selection section ---
        const bankNames = [
            "ธนาคารกสิกรไทย", "ธนาคารกรุงเทพ", "ธนาคารกรุงไทย", "ธนาคารไทยพาณิชย์",
            "ธนาคารกรุงศรีอยุธยา", "ธนาคารทหารไทยธนชาต", "ธนาคารออมสิน", "ธ.ก.ส.",
            "ธนาคารซีไอเอ็มบี ไทย", "ธนาคารยูโอบี", "ธนาคารแลนด์ แอนด์ เฮ้าส์", "ธนาคารไอซีบีซี (ไทย)",
            "ธนาคารเกียรตินาคินภัทร", "ธนาคารไทยเครดิต", "ธนาคารอาคารสงเคราะห์"
        ];

        // Populate bank dropdown
        function populateBankDropdown() {
            // Clear old options first
            bankSelect.innerHTML = '';

            // Add "Please select bank" option as the first and default
            const defaultOption = document.createElement('option');
            defaultOption.value = '';
            defaultOption.textContent = 'โปรดเลือกธนาคาร';
            defaultOption.selected = true; // Set as default selected
            defaultOption.disabled = true; // Disable selecting it
            bankSelect.appendChild(defaultOption);

            bankNames.forEach(bank => {
                const option = document.createElement('option');
                option.value = bank;
                option.textContent = bank;
                bankSelect.appendChild(option);
            });
        }
        populateBankDropdown(); // Call to populate on load

        // --- Custom Prompt Box for saving file ---
        const websiteNamePromptOverlay = document.getElementById('websiteNamePromptOverlay');
        const websiteNameInput = document.getElementById('websiteNameInput');
        const promptOkBtn = document.getElementById('promptOkBtn');
        const promptCancelBtn = document.getElementById('promptCancelBtn');

        function showWebsiteNamePrompt() {
            return new Promise((resolve) => {
                websiteNameInput.value = ''; // Clear old value
                websiteNamePromptOverlay.classList.add('show');
                websiteNameInput.focus(); // Focus on input field

                const handleOk = () => {
                    websiteNamePromptOverlay.classList.remove('show');
                    resolve(websiteNameInput.value.trim());
                    removeListeners();
                };

                const handleCancel = () => {
                    websiteNamePromptOverlay.classList.remove('show');
                    resolve(null); // Return null on cancel
                    removeListeners();
                };

                const handleKeyPress = (event) => {
                    if (event.key === 'Enter') {
                        handleOk();
                    }
                };

                promptOkBtn.addEventListener('click', handleOk);
                promptCancelBtn.addEventListener('click', handleCancel);
                websiteNameInput.addEventListener('keypress', handleKeyPress);

                const removeListeners = () => {
                    promptOkBtn.removeEventListener('click', handleOk);
                    promptCancelBtn.removeEventListener('click', handleCancel);
                    websiteNameInput.removeEventListener('keypress', handleKeyPress);
                };
            });
        }

        // --- Bank account management buttons ---
        document.getElementById('pasteBankAccBtn').addEventListener('click', async () => {
            try {
                // Attempt to read data directly from clipboard
                const text = await navigator.clipboard.readText();
                if (text) {
                    bankAccountInput.value = text.replace(/\D/g, ''); // Paste only numbers
                    updateLinkedFields();
                    showMessage('วางข้อมูลเรียบร้อยแล้ว!');
                } else {
                    showMessage('คลิปบอร์ดว่างเปล่า หรือไม่สามารถอ่านได้', 'error');
                }
            } catch (err) {
                console.error('Failed to paste from clipboard:', err);
                // The browser/iframe security prevents direct clipboard access without user action
                // For this environment, we'll indicate failure. For external browsers, it might work.
                showMessage('ไม่สามารถเข้าถึงคลิปบอร์ดได้', 'error');
            }
        });

        document.getElementById('copyBankAccBtn').addEventListener('click', () => {
            if (bankAccountInput.value.trim() !== '') {
                copyToClipboard(bankAccountInput.value.trim());
            } else {
                showMessage('ไม่มีเลขบัญชีให้คัดลอก', 'error');
            }
        });

        document.getElementById('clearBankAccBtn').addEventListener('click', () => {
            bankAccountInput.value = '';
            updateLinkedFields();
            showMessage('ล้างข้อมูลเรียบร้อยแล้ว!');
        });


        // --- Save File section ---
        document.getElementById('saveFileBtn').addEventListener('click', async () => {
            const user = themuizUserDisplay.textContent;
            const nameSurname = document.getElementById('nameSurnameDisplay').textContent;
            const phone = phoneDisplay.textContent;
            const bank = bankSelect.value;
            const bankAccount = bankAccountInput.value.replace(/\D/g, '');

            // Check if main data is generated or entered
            if (user === 'ผลลัพธ์ยูสเซอร์จะโชว์ที่นี่' || nameSurname === 'กด "สุ่ม" เพื่อสร้าง' || phone === 'ผลลัพธ์เบอร์โทรจะโชว์ที่นี่' || bankAccount === '' || bank === '') {
                showMessage('กรุณาสร้าง/ป้อนข้อมูลให้ครบถ้วนและเลือกธนาคารก่อนบันทึก', 'error');
                return;
            }

            // Show Custom Prompt Box to ask for website name
            const websiteName = await showWebsiteNamePrompt();

            if (websiteName === null || websiteName === '') {
                showMessage('ยกเลิกการบันทึก หรือชื่อเว็บว่างเปล่า', 'error');
                return;
            }

            // Arrange and space content as requested
            const fileContent = `
ยูสเซอร์ : ${user}

เบอร์ : ${phone}

ชื่อ : ${nameSurname}

ธนาคาร : ${bank}

เลขบัญชี : ${bankAccount}
            `.trim();

            // New file name: "{Entered Website Name} - {Displayed User}.txt" (changed _ to -)
            const filename = `${websiteName} - ${user}.txt`;

            const blob = new Blob([fileContent], { type: 'text/plain;charset=utf-8' });
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            showMessage('บันทึกไฟล์เรียบร้อยแล้ว!');
        });

        // Initial setup on page load
        updateLinkedFields();
    </script>
</body>
</html>


